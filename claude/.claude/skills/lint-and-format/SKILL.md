---
name: lint-and-format
description: 実装完了後にフォーマッタおよびリンターを実行し、コード品質とスタイルを修正する。 
allowed-tools: Read, Grep, Glob, Shell
---

## 目的

コーディング完了後に、コードの品質維持およびプロジェクトのスタイルガイドへの準拠を目的として、自動整形（Format）と静的解析（Lint）を実行します。

## ガイドライン

### コード整形

プロジェクトの構成を確認し、以下のいずれかの設定ファイルに基づいて整形を実行すること。

- **Prettier**: `.prettierrc` (または関連設定ファイル) を検知した場合
  - 設定ファイルが存在するディレクトリにて `npx prettier --write .` を実行する。
- **Biome**: `biome.json` を検知した場合
  - 設定ファイルが存在するディレクトリにて `npx biome format --write .` を実行する。

### 静的解析・修正

プロジェクトの構成を確認し、以下のいずれかの設定ファイルに基づいて修正を実行すること。

- **ESLint**: `.eslintrc.js` または `.eslintrc.json` を検知した場合
  - 設定ファイルが存在するディレクトリにて `npx eslint . --fix` を実行する。
- **Biome**: `biome.json` を検知した場合
  - 設定ファイルが存在するディレクトリにて `npx biome lint --apply .` を実行する。

### DBスキーマの整形

- **Prisma**: `prisma/schema.prisma` を検知した場合
  - 設定ファイルが存在するディレクトリにて `npx prisma format` を実行する。

## 注意事項
- 実行前に必ず設定ファイルの有無を確認し、プロジェクトに最適なツールを選択すること。
- エラーが発生した場合は、メッセージを確認し、必要に応じて手動修正またはタスクの再試行を検討すること。
